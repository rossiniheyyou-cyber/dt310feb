{"is_source_file": true, "format": "JavaScript", "description": "This file contains database configuration and connection setup logic using TypeORM for a MySQL database. It includes functions to build SSL options, parse environment variables, create and initialize the data source, and provide metadata about the database connection.", "external_files": ["../entities/User", "../entities/Course", "../entities/Lesson"], "external_methods": ["require('../entities/User').UserEntity", "require('../entities/Course').CourseEntity", "require('../entities/Lesson').LessonEntity"], "published": ["initializeDataSource", "checkDatabaseConnectivity", "getConfiguredDbName", "getDataSource", "createDataSourceFromEnv", "getDbMeta"], "classes": [], "methods": [{"name": "parseIntEnv(value, fallback)", "description": "Helper function to safely parse environment variables into integers with fallback value.", "scope": "", "scopeKind": ""}, {"name": "describeTarget(target)", "description": "Returns a minimal string description of a database target given host, port, and database name.", "scope": "", "scopeKind": ""}, {"name": "buildMySqlSslOptionsFromEnv()", "description": "Builds SSL options for MySQL connections based on environment variables, including handling CA certificate files.", "scope": "", "scopeKind": ""}, {"name": "buildMySqlDataSourceOptionsFromEnv()", "description": "Creates a configuration object for TypeORM DataSource using environment variables for MySQL.", "scope": "", "scopeKind": ""}, {"name": "getDataSource()", "description": "Returns the singleton DataSource instance if initialized.", "scope": "", "scopeKind": ""}, {"name": "getDbMeta()", "description": "Returns non-secret metadata (type, host, port, database) about the configured database.", "scope": "", "scopeKind": ""}, {"name": "createDataSourceFromEnv()", "description": "Creates a new DataSource object configured based on environment variables for MySQL.", "scope": "", "scopeKind": ""}, {"name": "initializeDataSource()", "description": "Asynchronously initializes the DataSource singleton for the database connection.", "scope": "", "scopeKind": ""}, {"name": "checkDatabaseConnectivity()", "description": "Performs a simple query to check if the database is reachable and connected.", "scope": "", "scopeKind": ""}, {"name": "getConfiguredDbName()", "description": "Returns the name of the database configured via environment variables.", "scope": "", "scopeKind": ""}], "calls": ["require('path')", "require('fs')", "require('typeorm').DataSource", "buildMySqlSslOptionsFromEnv()", "fs.existsSync()", "fs.readFileSync()", "path.join()", "describeTarget()", "new DataSource()", "appDataSource.initialize()", "appDataSource.query('SELECT 1')"], "search-terms": ["TypeORM DataSource", "MySQL SSL options", "database environment variables", "createDataSourceFromEnv", "initializeDataSource", "checkDatabaseConnectivity"], "state": 2, "file_id": 15, "knowledge_revision": 161, "git_revision": "87dfb07418666d26c020e4b0c1a612f0f6a98ad6", "revision_history": [{"42": "827b5f29f7e96a66bd426cb06b2015596f17e595"}, {"50": "4c25a0c02260f067c357b1357fee5c19d1be3f7e"}, {"66": "70a15a2f335745ae890845d5b4ad9d3332959b37"}, {"69": "8b743168c96a245e698b88134ae601b470eb59d3"}, {"76": "ac0f6efe3cff082774d90dbbaa94ede573f6657f"}, {"84": "befc00cd5fb3097a2b51b7253e7ab375891b6eba"}, {"98": "10ba7d57aad0e4f061591f056398d807b21221c1"}, {"137": "969096bc82a2f9b113c594cfb2be26653fa2f63c"}, {"154": "87dfb07418666d26c020e4b0c1a612f0f6a98ad6"}, {"161": "87dfb07418666d26c020e4b0c1a612f0f6a98ad6"}], "ctags": [{"_type": "tag", "name": "appDataSource", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^let appDataSource = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "buildMySqlDataSourceOptionsFromEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function buildMySqlDataSourceOptionsFromEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "buildMySqlSslOptionsFromEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function buildMySqlSslOptionsFromEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "checkDatabaseConnectivity", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^async function checkDatabaseConnectivity() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "configuredDbMeta", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^let configuredDbMeta = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "createDataSourceFromEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function createDataSourceFromEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "describeTarget", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function describeTarget(target) {$/", "language": "JavaScript", "kind": "function", "signature": "(target)"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getConfiguredDbName", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function getConfiguredDbName() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getDataSource", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function getDataSource() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getDbMeta", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function getDbMeta() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initializationPromise", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^let initializationPromise = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "initializeDataSource", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^  initializeDataSource,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "initializeDataSource", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^async function initializeDataSource() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "parseIntEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^function parseIntEnv(value, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(value, fallback)"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/config/db.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}], "hash": "7a8f6a456894f9e7b43b36c8f043629d", "format-version": 4, "code-base-name": "lms_backend", "filename": "lms_backend/src/config/db.js", "fields": [{"name": "let appDataSource = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let configuredDbMeta = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let initializationPromise = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "initializeDataSource,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}