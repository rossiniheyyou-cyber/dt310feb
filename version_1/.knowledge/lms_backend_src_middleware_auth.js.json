{"is_source_file": true, "format": "JavaScript", "description": "This file implements an Express middleware function that authenticates incoming HTTP requests using Bearer JWT tokens. It verifies the token, extracts user information, checks user existence in the database, and attaches user info to the request object.", "external_files": ["../utils/jwt", "../config/db"], "external_methods": ["verifyAccessToken", "getDataSource"], "published": ["auth"], "classes": [], "methods": [{"name": "auth(req, res, next)", "description": "Express middleware that verifies JWT, retrieves user info from the database, and attaches it to the request object.", "scope": "", "scopeKind": ""}], "calls": ["verifyAccessToken", "getDataSource", "userRepo.findOne"], "search-terms": ["auth middleware", "JWT verification", "Express authorization", "user validation", "auth.js"], "state": 2, "file_id": 16, "knowledge_revision": 77, "git_revision": "ac0f6efe3cff082774d90dbbaa94ede573f6657f", "revision_history": [{"43": "827b5f29f7e96a66bd426cb06b2015596f17e595"}, {"77": "ac0f6efe3cff082774d90dbbaa94ede573f6657f"}], "ctags": [{"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^async function auth(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^      email: user.email,$/", "language": "JavaScript", "kind": "property", "scope": "req.user", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^      id: String(user.id),$/", "language": "JavaScript", "kind": "property", "scope": "req.user", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^      name: user.name,$/", "language": "JavaScript", "kind": "property", "scope": "req.user", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^      role: user.role,$/", "language": "JavaScript", "kind": "property", "scope": "req.user", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/middleware/auth.js", "pattern": "/^    req.user = {$/", "language": "JavaScript", "kind": "class", "scope": "req", "scopeKind": "class"}], "hash": "dab03694f8f976da05c34b2a75080faa", "format-version": 4, "code-base-name": "lms_backend", "filename": "lms_backend/src/middleware/auth.js", "fields": [{"name": "email: user.email,", "scope": "req.user", "scopeKind": "class", "description": "unavailable"}, {"name": "id: String(user.id),", "scope": "req.user", "scopeKind": "class", "description": "unavailable"}, {"name": "name: user.name,", "scope": "req.user", "scopeKind": "class", "description": "unavailable"}, {"name": "role: user.role,", "scope": "req.user", "scopeKind": "class", "description": "unavailable"}]}