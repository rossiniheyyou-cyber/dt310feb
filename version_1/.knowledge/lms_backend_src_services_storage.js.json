{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for working with AWS S3, including creating S3 clients from environment variables, validating S3 keys, inferring content types, and generating presigned URLs for uploading and downloading videos.", "external_files": ["@aws-sdk/client-s3", "@aws-sdk/s3-request-presigner"], "external_methods": ["require('@aws-sdk/client-s3').S3Client", "require('@aws-sdk/client-s3').GetObjectCommand", "require('@aws-sdk/client-s3').PutObjectCommand", "require('@aws-sdk/s3-request-presigner').getSignedUrl"], "published": ["getPresignedUrl", "getUploadPresignedUrl"], "classes": [], "methods": [{"name": "createS3ClientFromEnv()", "description": "Creates an AWS S3 client configured with region from environment variables or default.", "scope": "", "scopeKind": ""}, {"name": "getBucketNameFromEnv()", "description": "Validates the environment variable for the S3 bucket name and returns it.", "scope": "", "scopeKind": ""}, {"name": "normalizeAndValidateS3Key(key)", "description": "Performs minimal validation on the S3 object key to prevent dangerous or invalid keys.", "scope": "", "scopeKind": ""}, {"name": "inferContentType(fileName)", "description": "Infers MIME content type based on file extension.", "scope": "", "scopeKind": ""}, {"name": "getPresignedUrl(fileKey, opts = {})", "description": "Generates a temporary, secure URL for retrieving an object from S3.", "scope": "", "scopeKind": ""}, {"name": "getUploadPresignedUrl(fileKey, opts = {})", "description": "Generates a temporary, secure URL for uploading an object to S3.", "scope": "", "scopeKind": ""}], "calls": ["createS3ClientFromEnv()", "getBucketNameFromEnv()", "normalizeAndValidateS3Key()", "getSignedUrl()"], "search-terms": ["S3 presigned URL functions", "AWS SDK S3 utilities", "generate signed URL", "video upload/download URLs", "environment configured S3 access"], "state": 2, "file_id": 34, "knowledge_revision": 134, "git_revision": "7c132f2ba0cbfa921f47c07d4be8fedc5411604f", "ctags": [{"_type": "tag", "name": "createS3ClientFromEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^function createS3ClientFromEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getBucketNameFromEnv", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^function getBucketNameFromEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getPresignedUrl", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^  getPresignedUrl,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "getPresignedUrl", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^async function getPresignedUrl(fileKey, opts = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(fileKey, opts = {})"}, {"_type": "tag", "name": "getUploadPresignedUrl", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^async function getUploadPresignedUrl(fileKey, opts = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(fileKey, opts = {})"}, {"_type": "tag", "name": "inferContentType", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^function inferContentType(fileName) {$/", "language": "JavaScript", "kind": "function", "signature": "(fileName)"}, {"_type": "tag", "name": "normalizeAndValidateS3Key", "path": "/home/kavia/workspace/code-generation/digitalt3-learning-insights-platform-311763-311772/lms_backend/src/services/storage.js", "pattern": "/^function normalizeAndValidateS3Key(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}], "hash": "783d94088a88d8db8447eb0f444c1b77", "format-version": 4, "code-base-name": "lms_backend", "filename": "lms_backend/src/services/storage.js", "fields": [{"name": "getPresignedUrl,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"134": "7c132f2ba0cbfa921f47c07d4be8fedc5411604f"}]}